#!/bin/sh
#
# Copyright [2025] [LeMaRiva Tech]
# Licensed under the Apache License, Version 2.0

cfg_file=$1

[ -f /etc/haproxy-env ] && . /etc/haproxy-env

if [ -z "$cfg_file" ]; then
    cfg_file="${HAPROXY_CONFIG_FILE}"
    echo "No argument supplied, using ${cfg_file}"
    echo "To use config from host fs try \"(docker exec -i container haproxy-check -) < path_to_your_config\""
fi

/usr/local/sbin/haproxy -c -V -f "${cfg_file}"
